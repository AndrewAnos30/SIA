{% extends "basePOS.html" %}
{% block title %}BevRecs | Cart {% endblock%}

{% block content %}
<section class="section cart-section">
    <div class="p-2">
        <h6 class="page-title-cart">Your Orders</h6>
    </div>
    <div class="row">

        <div class="col-8">
     
    {% for cart in buyitem %}
    {% if cart.buyOrBought == False %}
 
   
            <div class="d-block order-card">
                <!-- ito ung mga inadd sa cart sa drinks  -->
        
                <div class="card mb-1">
                    <div class="row g-1">

                        <div class="col-12">

                            <div class="card-body mb-0 p-0">

                                <table class="table table-borderless mb-0 p-0">
                                    <tbody>

                                        <tr>
                                            <td class="col-2" style="vertical-align: middle;"> <img src="{{data.menuimage.url}}"
                                                    class="img-preview rounded" alt=""></td>
                                            <td class="col-5">
                                                <table class="table nested-table table-sm table-borderless p-0">
                                                    <tbody>
                                                        <tr>
                                                            <!--para sa main menu-->
                                                            <td class="main-menu">
                                                                <strong>{{cart.buyName}}</strong></td>
                                                            <td class="main-menu-price">
                                                                <strong>&#8369 {{cart.buyPrice}}</strong></td>
                                                        </tr>
                                                        <!--para sa size-->
                                                        <tr>
                                                            <td class="td-text">{{cart.buySize}}</td>
                                                            <td class="td-text"> &#8369 {{cart.priceSize}}</td>
                                                        </tr>
                                                        <!--para sa addons-->
                                                        <tr>
                                                            <td class="td-text">Add Ons:</td>
                                                        </tr>
                                                        
                                                        {% if cart.buyAddOns1 %}
                                                            <tr>
                                                                <td class="td-text">{{ cart.buyAddOns1 }}</td>
                                                                <td class="td-text">{{ cart.buyQuantityAO1 }}</td>
                                                                <td class="td-text">&#8369; {{ cart.menuAOPrice1 }}</td>
                                                            </tr>
                                                        {% endif %}
                                                        
                                                        {% if cart.buyAddOns2 %}
                                                            <tr>
                                                                <td class="td-text">{{ cart.buyAddOns2 }}</td>
                                                                <td class="td-text">{{ cart.buyQuantityAO2 }}</td>
                                                                <td class="td-text">&#8369; {{ cart.menuAOPrice2 }}</td>
                                                            </tr>
                                                        {% endif %}
                                                        
                                                        {% if cart.buyAddOns3 %}
                                                            <tr>
                                                                <td class="td-text">{{ cart.buyAddOns3 }}</td>
                                                                <td class="td-text">{{ cart.buyQuantityAO3 }}</td>
                                                                <td class="td-text">&#8369; {{ cart.menuAOPrice3 }}</td>
                                                            </tr>
                                                        {% endif %}
                                                        
                                                        {% if cart.buyAddOns4 %}
                                                            <tr>
                                                                <td class="td-text">{{ cart.buyAddOns4 }}</td>
                                                                <td class="td-text">{{ cart.buyQuantityAO4 }}</td>
                                                                <td class="td-text">&#8369; {{ cart.menuAOPrice4 }}</td>
                                                            </tr>
                                                        {% endif %}
                                                        
                                                        {% if cart.buyAddOns5 %}
                                                            <tr>
                                                                <td class="td-text">{{ cart.buyAddOns5 }}</td>
                                                                <td class="td-text">{{ cart.buyQuantityAO5 }}</td>
                                                                <td class="td-text">&#8369; {{ cart.menuAOPrice5 }}</td>
                                                            </tr>
                                                        {% endif %}
                                                        
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td class="col-2" style="vertical-align: middle;">
                                                <div class="input-group my-auto">
                                                    <input  class="form-control" style="text-align: center;"
                                                        value="{{cart.buyQuantityMenu}}" readonly>
                                                </div>
                                            </td>
                                            <td class="col-2 text-center total-price"
                                                style="vertical-align: middle;">
                                                <h4><strong> &#8369 {{ cart.total_price }}</strong></h4>
                                            </td>
                                            <td class="col-1" style="vertical-align: middle;">
                                        


                                                    <button class="btn btn-sm delete-btn" data-bs-toggle="modal"
                                                        data-bs-target="#deletemodal"><i
                                                            class='bx bx-trash'></i></button>

                                                    <!--Delete function to delfete the menu in the cart-->

                                                    <!-- Modal -->
                                                    <div class="modal fade" id="deletemodal"
                                                        data-bs-backdrop="static" data-bs-keyboard="false"
                                                        tabindex="-1" aria-labelledby="daletemodal"
                                                        aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5"
                                                                        id="staticBackdropLabel">Confirmation
                                                                    </h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    Are you sure you want to delete this menu?
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button"
                                                                        class="btn btn-secondary"
                                                                        data-bs-dismiss="modal">Cancel</button>
                                                                    <button type="button"
                                                                        class="btn btn-primary">Delete</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            </div>

                        </div>

                    </div>
                   
            </div>
              
              
                <!-- ito ung mga inadd sa cart sa drinks end  -->
                {%endif%}
                {%endfor%}
                
            </div>

     
        <div class="col-4">

            <div class="card bg-transparent">
                <div class="card-body">
                    <form  action="{% url 'pos:update_values' %}" method="post"
                    enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="buyItem_{{ cart.id }}_buyOrBought" value="False">
                        <h6>Order Method </h6>
                        <div class="d-flex px-2 justify-content-center">
                          <div>
                            <input type="radio" class="btn-check d-flex" name="DineIn_Out" id="btn-check-4" autocomplete="off" value="IN" {% if buyitemforms.DineIn_Out.name == "IN" %}checked{% endif %}>
                            <label class="btn" for="btn-check-4">Dine In</label>
                          </div>
                          <div>
                            <input type="radio" class="btn-check d-flex" name="DineIn_Out" id="btn-check-3" autocomplete="off" value="OUT" {% if buyitemforms.DineIn_Out.name == "OUT" %}checked{% endif %}>
                            <label class="btn" for="btn-check-3">Takeout</label>
                          </div>
                        </div>
                        
                        <h6 class="mt-2">Payment Method</h6>
                        <div class="d-flex px-2 justify-content-center">
                          <div>
                            <input type="radio" class="btn-check d-flex" name="payment_method" id="btn-check-5" autocomplete="off" value="cash" {% if buyitemforms.payment_method.name == "cash" %}checked{% endif %}>
                            <label class="btn" for="btn-check-5">Cash</label>
                          </div>
                          <div>
                            <input type="radio" class="btn-check d-flex" name="payment_method" id="btn-check-6" autocomplete="off" value="gcash" {% if buyitemforms.payment_method.name == "gcash" %}checked{% endif %}>
                            <label class="btn" for="btn-check-6">GCash</label>
                          </div>
                        </div>
                        
                        <div class="total-amount mt-4">
                            <div class="d-flex justify-content-between">
                                <h6><strong>Tendred Payment</strong></h6>
                                <input name="tenderedPayment" step="0.01" type="number" class="form-control text-end ms-auto" inputmode="numeric" pattern="[0-9]*">                                    </div>
                        </div>
                        
                        <div class="total-amount mt-4">
                            <div class="d-flex justify-content-between">
                                <h6><strong>Total Amount</strong></h6>
                                <input name="AllPayment" type="text" class="form-control bg-transparent border-0 fw-bold text-end" value="{{ total_price }}" readonly>&#8369                                    </div>
                        </div>
                        <div class="text-center col-12 d-grid">
                            <button type="submit" class="btn" style=" background-color: #FF862F !important;">Place Order</button> 
                        </div>
                    </form>
                </div>
            </div>
        </div>
    <!-- list of menus in the cart  -->
</section>
{% endblock content %}