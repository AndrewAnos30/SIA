{% extends "posbase.html" %}
{% block title %}BevRecs | Menu {% endblock%}


{% block content %}
        <section class="section menu rounded">
          <div class="container d-flex flex-column ">
            <div class="position-relative">
              <img src="img/Home.png" alt="Home" class="header-image">
              <button id="openChatModal" class="sample position-absolute top-50 start-50 translate-middle" style="margin-top: 100px; background-color: lightsalmon; font-size: larger; height: 80px; font-weight: bolder;">CHAT NOW!</button>
            </section>
              </div>
            </div>
          </div>
          <!-- Rest of your code... -->
      
          <!-- Chat Modal -->
          <div id="chatModal" class="modal" style="margin-left: 200px;">
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2>ASK TO AI ABOUT STORE</h2>
              <div id="chatMessages"></div>
              <form id="chatForm">
                <input type="text" id="messageInput" placeholder="Type your message..." />
                <button type="submit">Send</button>
              </form>
            </div>
          </div>
        </section>
      </main>
      

      <div class="tab-content bg-white rounded">
        <div class="tab-content mt-4" style="margin-left: 350px;">
          <div class="row g-1">
            {% for row in menuDrinks|dictsort:'menuprice1' %}
            <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6">
              <div class="card">
                <img src="{{ row.menuimage.url }}" class="card-img-top" alt="...">
                <div class="card-body">
                  <a class="card-title fs-6 text-nowrap" href="{% url 'pos:home' %}">{{ row.menuname }}</a>
                  <!-- off-canvas display menu Info -->
                  <div class="btn-group" role="group" aria-label="Rating" style="width: 5px;">
                    <button type="button" class="btn btn-outline-primary">&#9734;</button>
                    <button type="button" class="btn btn-outline-primary">&#9734;</button>
                    <button type="button" class="btn btn-outline-primary">&#9734;</button>
                    <button type="button" class="btn btn-outline-primary">&#9734;</button>
                    <button type="button" class="btn btn-outline-primary">&#9734;</button>
                  </div>
                  <div class="offcanvas offcanvas-end" tabindex="-1" id="menuinformation-{{ row.id }}"
                    aria-labelledby="menuinformation-{{ row.id }}">
                    <div class="offcanvas-header">
                      <button type="button" class="btn btn-primary">
                        <a type="button" class="cart-btn text-decoration-none text-white" href="{% url 'pos:cart' %}">
                          Cart(0)
                        </a>
                      </button>
                      <!-- Add any additional content for the off-canvas menu here -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      

                      </div>
                  
                <br>
                      <div class="container" style="margin-left: 440px;">
                        <h3>Customer Ratings</h3>
                        <div class="card">
                          <div class="card-body d-flex justify-content-between">
                            <h5 class="card-title">John Doe</h5>
                            <div class="rating">
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                            </div>
                          </div>
                          <div class="card-body">
                            <p class="card-text">Great product! I highly recommend it.</p>
                          </div>
                        </div>
                        <div class="card">
                          <div class="card-body d-flex justify-content-between">
                            <h5 class="card-title">Jane Smith</h5>
                            <div class="rating">
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                            </div>
                          </div>
                            <div class="card-body">
                            <p class="card-text">The quality is excellent. Will buy again.</p>
                          </div>
                        </div>
                        <div class="card">
                        <div class="card-body d-flex justify-content-between">
                            <h5 class="card-title">Sarah Johnson</h5>
                            <div class="rating">
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                              <span class="star"></span>
                            </div>
                          </div>
                            <div class="card-body">
                            <p class="card-text">Impressive product! It exceeded my expectations.</p>
                          </div>
                        </div>
                      
                        <div class="card">
                          <div class="card-body d-flex justify-content-between">
                            <h5 class="card-title">Michael Williams</h5>
                            <div class="rating">
                              <span class="star active"></span>
                              <span class="star active"></span>
                              <span class="star active"></span>
                              <span class="star active"></span>
                              <span class="star active"></span>
                            </div>
                          </div>
                            <div class="card-body">
                            <p class="card-text">Fast shipping and great customer service.</p>
                          </div>
                        </div>
                        <div class="card">
                            <div class="card-body d-flex justify-content-between">
                            <h5 class="card-title">Emily Davis</h5>
                          <div class="rating">
                            <span class="star active"></span>
                            <span class="star active"></span>
                            <span class="star active"></span>
                            <span class="star active"></span>
                            <span class="star active"></span>
                          </div>
                        </div>
                        <div class="card-body">
                            <p class="card-text">The product arrived in perfect condition. Very satisfied.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>
  
                  
        
                      <style>
                
                      .rating {
                        unicode-bidi: bidi-override;
                        direction: rtl;
                        text-align: center;
                        outline: black;
                      }
                      
                      .rating .star {
                        display: inline-block;
                        font-size: 1.5rem;
                        color: blue;
                        cursor: pointer;
                      }
                      
                      .rating .star:before {
                        content: '\2605';
                      }
                      
                      .rating .star:hover,
                      .rating .star:hover ~ .star {
                        color: yellow;
                      }
                      .modal {
                      display: none;
                      position: fixed;
                      z-index: 1;
                      left: 0;
                      top: 0;
                      width: 100%;
                      height: 100%;
                      overflow: auto;
                      background-color: rgba(0, 0, 0, 0.5);
                    }

                    .modal-content {
                      background-color: #fefefe;
                      margin: 10% auto;
                      padding: 20px;
                      border: 1px solid #888;
                      width: 80%;
                      max-width: 600px;
                    }

                    .close {
                      color: #aaa;
                      float: right;
                      font-size: 28px;
                      font-weight: bold;
                    }

                    .close:hover,
                    .close:focus {
                      color: black;
                      text-decoration: none;
                      cursor: pointer;
                    }

                    h2 {
                      margin-top: 0;
                    }

                    #chatMessages {
                      height: 200px;
                      overflow-y: auto;
                      margin-bottom: 10px;
                      border: 1px solid #ccc;
                      padding: 10px;
                    }

                    #chatForm {
                      display: flex;
                    }

                    #messageInput {
                      flex-grow: 1;
                      margin-right: 10px;
                    }

                    #chatForm button {
                      padding: 6px 12px;
                    }
                    
                    </style>
                    

    <script type="text/javascript" src="/static/js/virtual-select.min.js"></script>


    <script type="text/javascript">
      VirtualSelect.init({
        ele: '#multiSelect'
      });
    </script>
     <script>
      function selectAllCheckboxes(check1Id, check2Id, check3Id, sourceCheckbox) {
        var checkboxes = document.querySelectorAll('.form-check-input');
        
        for (var i = 0; i < checkboxes.length; i++) {
          if (
            checkboxes[i].id === check1Id ||
            checkboxes[i].id === check2Id ||
            checkboxes[i].id === check3Id
          ) {
            checkboxes[i].checked = sourceCheckbox.checked;
          }
        }
      }
    </script>
    <script>
     // Handle chat modal open event
document.getElementById("openChatModal").addEventListener("click", function() {
  document.getElementById("chatModal").style.display = "block";
});

// Handle chat modal close event
document.getElementsByClassName("close")[0].addEventListener("click", function() {
  document.getElementById("chatModal").style.display = "none";
});

// Handle form submission and process user input
document.getElementById("chatForm").addEventListener("submit", function(event) {
  event.preventDefault(); // Prevent form submission

  // Get user input from the message input field
  const userInput = document.getElementById("messageInput").value;

  // Clear the input field
  document.getElementById("messageInput").value = "";

  // Display user message in the chat log
  document.getElementById("chatMessages").innerHTML += "<div class='user-message'>" + userInput + "</div>";

  // Process user input and generate AI response
  const aiResponse = processUserInput(userInput);

  // Display AI response in the chat log
  document.getElementById("chatMessages").innerHTML += "<div class='ai-message'>" + aiResponse + "</div>";
});

// Process user input and generate AI response
function processUserInput(userInput) {
  let aiResponse = "";

  if (userInput.toLowerCase().includes("best product")) {
    aiResponse = "AI response: The price range for the best product is 500 pesos and above.";
  } else if (userInput.toLowerCase().includes("best sales")) {
    aiResponse = "AI response: The best sales are on BEEF products.";
  } else {
    aiResponse = "AI response: Sorry, I don't have information on that specific query.";
  }

  return aiResponse;
}

    </script>
     </script>
     <script>
      // Get the menu drinks data from the Django template context
var menuDrinks = JSON.parse('{{ menuDrinks|safe }}');

// Initialize variables for lowest and highest prices
var lowestPrice = 99999999;
var highestPrice = 0;

// Iterate over the menu drinks data to find the lowest and highest prices
for (var i = 0; i < menuDrinks.length; i++) {
  var row = menuDrinks[i];
  if (row.menuprice1 < lowestPrice) {
    lowestPrice = row.menuprice1;
  }
  if (row.menuprice1 > highestPrice) {
    highestPrice = row.menuprice1;
  }
}

// Update the HTML to display the lowest and highest prices
document.getElementById('lowest-price').innerText = lowestPrice;
document.getElementById('highest-price').innerText = highestPrice;

     </script>


{% endblock content %}